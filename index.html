<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Share Zones - T√†i Nguy√™n Media Designer</title>
    <link rel="icon" href="https://raw.githubusercontent.com/dinhxuantuan-014/sheet/refs/heads/main/logo%20chuyen%20nghe%20media.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
:root{--accent-red:#E54B4B;--accent-pink:#D972FF;--main-blue:#4A4AEB;--dark-blue:#3B3B9A;--border-color:#6A6ADF;--container-bg:rgba(45,45,120,0.8);--dark-bg:#2A2A72;--text-color:#F0F0FF;--subtle-text-color:#A0A0E0;--accent-gradient:linear-gradient(90deg,var(--main-blue),var(--accent-pink));--success-green:#4CAF50;--warning-orange:#FF9800}
*{box-sizing:border-box}
html,body{margin:0;padding:0;width:100%;height:100%;overflow:hidden}
body{font-family:'Montserrat',sans-serif;background-color:var(--dark-bg);color:var(--text-color);display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}
#particle-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;pointer-events:none}
.container{background-color:var(--container-bg);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);padding:30px 40px;border-radius:12px;box-shadow:0 0 40px rgba(74,74,235,.4);border:1px solid var(--border-color);width:100%;max-width:800px;text-align:center;animation:fadeIn .6s ease-out forwards;max-height:90vh;overflow-y:auto;position:relative;z-index:1;will-change:opacity,transform}
@keyframes fadeIn{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
.main-title{font-size:2.8rem;font-weight:700;background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 20px;line-height:1.2}
.social-links{margin-bottom:30px;border-bottom:1px solid var(--border-color);padding-bottom:30px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:15px}
.social-links a{background-color:rgba(74,74,235,.2);color:var(--text-color);padding:8px 15px;border-radius:20px;text-decoration:none;font-size:.9rem;transition:all .2s ease;will-change:transform}
.social-links a:hover{background:var(--accent-gradient);color:#FFF;transform:translateY(-3px);box-shadow:0 4px 15px rgba(217,114,255,.4)}
.search-wrapper{display:flex;gap:10px;margin-bottom:15px}
#searchInput{flex-grow:1;padding:12px 15px;background-color:var(--dark-bg);border:1px solid var(--border-color);border-radius:8px;font-size:1rem;color:var(--text-color);transition:border-color .2s ease}
#searchInput:focus{outline:none;border-color:var(--main-blue);box-shadow:0 0 10px rgba(74,74,235,.5)}
#searchButton{padding:12px 25px;background:var(--accent-red);color:#FFF;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .2s ease;will-change:transform;display:flex;align-items:center;gap:8px;justify-content:center;min-width:120px}
#searchButton:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 4px 20px rgba(229,75,75,.6)}
#searchButton:disabled{opacity:.6;cursor:not-allowed}
.spinner{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#FFF;border-radius:50%;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
#status{min-height:50px;margin:15px 0;display:flex;align-items:center;justify-content:center;gap:10px}
.status-content{display:flex;align-items:center;gap:10px;padding:12px 20px;border-radius:8px;font-size:.95rem;animation:slideDown .3s ease}
@keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
.status-info{background:rgba(74,74,235,.2);color:var(--text-color);border:1px solid var(--border-color)}
.status-error{background:rgba(229,75,75,.2);color:#FFB3B3;border:1px solid var(--accent-red)}
.status-success{background:rgba(76,175,80,.2);color:#A5D6A7;border:1px solid var(--success-green)}
.status-offline{background:rgba(255,152,0,.2);color:#FFD54F;border:1px solid var(--warning-orange)}
.offline-banner{background:var(--warning-orange);color:#000;padding:10px;text-align:center;font-weight:700;position:fixed;top:0;left:0;right:0;z-index:9999;animation:slideDown .3s ease;display:none}
.skeleton{background:linear-gradient(90deg,rgba(74,74,235,.1) 25%,rgba(74,74,235,.2) 50%,rgba(74,74,235,.1) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:8px}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
.skeleton-line{height:20px;margin:10px 0}
.skeleton-box{height:60px;margin:10px 0}
#results{margin-top:30px;text-align:left;border-top:1px solid var(--border-color);padding-top:30px;opacity:0;animation:fadeInUp .5s ease forwards}
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
#result-title{font-size:2rem;color:var(--text-color);background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 25px}
#results h3{margin-top:25px;color:var(--subtle-text-color);font-weight:400;border-bottom:1px solid var(--border-color);padding-bottom:10px}
.result-list{list-style-type:none;padding-left:0;margin:0}
.result-list li{background:rgba(42,42,114,.8);margin-bottom:10px;padding:15px;border-radius:8px;border-left:4px solid var(--border-color);word-wrap:break-word;font-size:.95rem;display:flex;align-items:center;gap:12px;transition:all .2s ease;will-change:transform}
.result-list li:hover{border-left-color:var(--accent-pink);transform:translateX(5px)}
.result-list a{color:var(--text-color);text-decoration:none;transition:color .2s;display:block;width:100%;cursor:pointer}
.result-list a:hover{color:var(--subtle-text-color)}
.error-state{text-align:center;padding:40px 20px}
.error-icon{font-size:4rem;margin-bottom:20px;animation:bounce .5s ease}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.error-message{font-size:1.2rem;color:var(--text-color);margin-bottom:15px}
.error-detail{font-size:.9rem;color:var(--subtle-text-color);margin-bottom:25px}
.error-actions{display:flex;gap:15px;justify-content:center;flex-wrap:wrap}
.btn{padding:12px 25px;border:none;border-radius:8px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}
.btn-primary{background:var(--accent-gradient);color:#FFF}
.btn-primary:hover{transform:translateY(-3px);box-shadow:0 4px 20px rgba(217,114,255,.6)}
.btn-secondary{background:rgba(74,74,235,.2);color:var(--text-color)}
.btn-secondary:hover{background:rgba(74,74,235,.4)}
.popup-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:1000;justify-content:center;align-items:center;animation:fadeInOverlay .3s ease}
@keyframes fadeInOverlay{from{opacity:0}to{opacity:1}}
.popup-content{background:var(--container-bg);backdrop-filter:blur(10px);padding:30px;border-radius:12px;box-shadow:0 0 50px rgba(74,74,235,.6);border:2px solid var(--border-color);max-width:500px;width:90%;text-align:center;animation:slideIn .3s ease}
@keyframes slideIn{from{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}
.popup-content h2{color:var(--text-color);margin-top:0;background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.popup-content p{color:var(--subtle-text-color);margin:20px 0;font-size:1.1rem;line-height:1.6}
.popup-buttons{display:flex;gap:15px;justify-content:center;margin-top:25px}
.popup-btn{padding:12px 30px;border:none;border-radius:8px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s ease;will-change:transform}
.popup-btn-primary{background:var(--accent-gradient);color:#FFF}
.popup-btn-primary:hover{transform:translateY(-3px);box-shadow:0 4px 20px rgba(217,114,255,.6)}
.popup-btn-secondary{background:rgba(74,74,235,.2);color:var(--text-color)}
.popup-btn-secondary:hover{background:rgba(74,74,235,.4)}
@media (max-width:600px){
body{padding:0;align-items:stretch}
.container{padding:20px 15px;border-radius:0;border:none;height:100%;max-height:100vh;box-shadow:none}
.main-title{font-size:2.2rem}
.search-wrapper{flex-direction:column}
#searchButton{width:100%}
.popup-content{padding:20px;width:85%}
.popup-buttons{flex-direction:column}
.error-actions{flex-direction:column}
.btn{width:100%}
}
    </style>
</head>
<body>
    <div id="offline-banner" class="offline-banner">
        ‚ö†Ô∏è Kh√¥ng c√≥ k·∫øt n·ªëi internet
    </div>
    
    <canvas id="particle-canvas"></canvas>
    
    <div id="popup" class="popup-overlay">
        <div class="popup-content">
            <h2>üéâ Th√¥ng B√°o</h2>
            <p id="popup-message">ƒêang t·∫£i...</p>
            <div class="popup-buttons">
                <button class="popup-btn popup-btn-primary" id="popup-visit">Truy C·∫≠p Link</button>
                <button class="popup-btn popup-btn-secondary" id="popup-close">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <div class="container">
        <h1 class="main-title">Share Zones - T√†i Nguy√™n Media Designer</h1>
        <div class="social-links">
          <a href="https://www.facebook.com/groups/chuyennghemedia/" target="_blank" rel="noopener">Facebook Group</a>
          <a href="https://discord.gg/vM8cnmxwfs" target="_blank" rel="noopener">Discord</a>
          <a href="https://t.me/chuyennghemedia/" target="_blank" rel="noopener">Telegram</a>
          <a href="https://zalo.me/g/monpsz855" target="_blank" rel="noopener">Zalo Group</a>
        </div>
        <div class="search-wrapper">
            <input type="text" id="searchInput" placeholder="Nh·∫≠p code v√†o ƒë√¢y..." autocomplete="off">
            <button id="searchButton">
                <span id="buttonText">T√¨m Ki·∫øm</span>
            </button>
        </div>
        <div id="status"></div>
        <div id="results" style="display:none;"></div>
    </div>

    <script>
      const _0x4a2b=['aHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J6bE1IdXdMS2MxZGdqeEJqNFAzZ1BkbjZkNlRQeVFrdHk4NE0yWjVyUWxsQzhZYUJNRFV5Ty10V1E4bHgzX1d3NXgvZXhlYw==','MUhoNVA0UTJpeWg5b3RVUkRGQk9fSURUeWJSU18wWko0SnFlOFdGei16OA=='];
      const _0x1d4c=s=>atob(s);
      const API=_0x1d4c(_0x4a2b[0]);
      const SID=_0x1d4c(_0x4a2b[1]);
      
      let cache={ads:[],timestamp:0};
      let dlLink='';
      const CACHE_TIME=3e5;
      const MAX_RETRIES=3;
      const RETRY_DELAYS=[1000,3000,5000];
      
      // Network status monitoring
      let isOnline=navigator.onLine;
      const offlineBanner=document.getElementById('offline-banner');
      
      window.addEventListener('online',()=>{
        isOnline=true;
        offlineBanner.style.display='none';
        showStatus('‚úÖ ƒê√£ k·∫øt n·ªëi l·∫°i internet','success');
      });
      
      window.addEventListener('offline',()=>{
        isOnline=false;
        offlineBanner.style.display='block';
        showStatus('‚ö†Ô∏è M·∫•t k·∫øt n·ªëi internet','offline');
      });
      
      // Status helper
      function showStatus(msg,type='info'){
        const stat=document.getElementById('status');
        const className=`status-content status-${type}`;
        
        if(type==='loading'){
          stat.innerHTML=`<div class="${className}"><div class="spinner"></div><span>${msg}</span></div>`;
        }else{
          const icons={info:'‚ÑπÔ∏è',error:'‚ùå',success:'‚úÖ',offline:'‚ö†Ô∏è'};
          stat.innerHTML=`<div class="${className}">${icons[type]||''} ${msg}</div>`;
        }
      }
      
      function clearStatus(){
        document.getElementById('status').innerHTML='';
      }
      
      // Clean URL
      function cleanURL(){
        const url=new URL(window.location.href);
        const trackingParams=['fbclid','gclid','utm_source','utm_medium','utm_campaign','utm_content','utm_term'];
        let cleaned=false;
        
        trackingParams.forEach(param=>{
          if(url.searchParams.has(param)){
            url.searchParams.delete(param);
            cleaned=true;
          }
        });
        
        if(cleaned){
          window.history.replaceState({},'',url.pathname+url.search);
        }
      }
      
      // Init
      (async()=>{
        cleanURL();
        loadAds();
        const p=location.pathname;
        if(p.length>1){
          const c=p.substring(1);
          if(/^\d+$/.test(c)){
            const inp=document.getElementById('searchInput');
            inp.value=c;
          }
        }
      })();

      // Load ads
      async function loadAds(){
        const now=Date.now();
        if(cache.ads.length&&(now-cache.timestamp)<CACHE_TIME)return;
        
        try{
          const res=await fetch(`${API}?action=getAds`,{
            method:'GET',
            cache:'force-cache'
          });
          if(!res.ok)throw new Error(`HTTP ${res.status}`);
          const d=await res.json();
          
          if(d.ads&&Array.isArray(d.ads)){
            cache.ads=d.ads;
            cache.timestamp=now;
          }
        }catch(e){
          console.error('Ads load error:',e);
          if(!cache.ads.length)cache.ads=[];
        }
      }

      const getRandAd=()=>cache.ads.length?cache.ads[Math.floor(Math.random()*cache.ads.length)]:null;

      function showPop(link){
        const ad=getRandAd();
        if(!ad){
          window.open(link,'_blank','noopener,noreferrer');
          return;
        }

        dlLink=link;
        const pop=document.getElementById('popup');
        const msg=document.getElementById('popup-message');
        
        msg.textContent=ad.title;
        pop.style.display='flex';

        const visit=document.getElementById('popup-visit');
        const close=document.getElementById('popup-close');
        
        visit.onclick=()=>{
          window.open(ad.link,'_blank','noopener,noreferrer');
          window.open(dlLink,'_blank','noopener,noreferrer');
          pop.style.display='none';
        };

        close.onclick=()=>{
          window.open(dlLink,'_blank','noopener,noreferrer');
          pop.style.display='none';
        };
      }

      // Button state management
      function setButtonState(state){
        const btn=document.getElementById('searchButton');
        const btnText=document.getElementById('buttonText');
        
        btn.disabled=state==='loading';
        
        if(state==='loading'){
          btn.innerHTML='<div class="spinner"></div><span>ƒêang t√¨m...</span>';
        }else if(state==='retry'){
          btn.innerHTML='<span>üîÑ Th·ª≠ L·∫°i</span>';
        }else{
          btn.innerHTML='<span>T√¨m Ki·∫øm</span>';
        }
      }

      // Search with retry
      const inp=document.getElementById('searchInput');
      const btn=document.getElementById('searchButton');
      
      inp.addEventListener('keydown',e=>{
        if(e.key==='Enter'){
          e.preventDefault();
          search();
        }
      });
      
      btn.addEventListener('click',search);

      let isSearching=false;
      let currentRetry=0;

      async function search(){
        if(isSearching)return;
        
        // Check offline
        if(!isOnline){
          showStatus('Kh√¥ng c√≥ k·∫øt n·ªëi internet. Vui l√≤ng ki·ªÉm tra m·∫°ng.','offline');
          return;
        }
        
        const code=inp.value.trim();
        
        if(!code){
          showStatus('Vui l√≤ng nh·∫≠p code','error');
          return;
        }
        
        currentRetry=0;
        await performSearch(code);
      }
      
      async function performSearch(code,retryCount=0){
        isSearching=true;
        const res=document.getElementById('results');
        res.style.display='none';
        
        // Show loading
        setButtonState('loading');
        if(retryCount>0){
          showStatus(`ƒêang th·ª≠ l·∫°i (${retryCount}/${MAX_RETRIES})...`,'loading');
        }else{
          showStatus('ƒêang t√¨m ki·∫øm...','loading');
        }
        
        // Show skeleton
        showSkeleton();
        
        try{
          const controller=new AbortController();
          const timeoutId=setTimeout(()=>controller.abort(),15000); // 15s timeout
          
          const resp=await fetch(`${API}?action=search&code=${encodeURIComponent(code)}`,{
            method:'GET',
            cache:'no-store',
            signal:controller.signal
          });
          
          clearTimeout(timeoutId);
          
          if(!resp.ok){
            throw new Error(resp.status===404?'NOT_FOUND':`HTTP_${resp.status}`);
          }
          
          const data=await resp.json();
          
          // Success
          clearStatus();
          setButtonState('normal');
          display(data);
          isSearching=false;
          currentRetry=0;
          
        }catch(e){
          console.error('Search error:',e);
          
          // Handle different error types
          if(e.name==='AbortError'){
            handleError('TIMEOUT',code,retryCount);
          }else if(!isOnline){
            handleError('OFFLINE',code,retryCount);
          }else if(e.message==='NOT_FOUND'){
            handleError('NOT_FOUND',code,retryCount);
          }else{
            handleError('NETWORK',code,retryCount);
          }
        }
      }
      
      function handleError(type,code,retryCount){
        const res=document.getElementById('results');
        res.style.display='none';
        
        const errors={
          TIMEOUT:{
            icon:'‚è±Ô∏è',
            title:'K·∫øt n·ªëi qu√° l√¢u',
            detail:'M√°y ch·ªß ph·∫£n h·ªìi ch·∫≠m. Vui l√≤ng th·ª≠ l·∫°i.',
            canRetry:true
          },
          OFFLINE:{
            icon:'üì°',
            title:'Kh√¥ng c√≥ k·∫øt n·ªëi',
            detail:'Vui l√≤ng ki·ªÉm tra internet v√† th·ª≠ l·∫°i.',
            canRetry:false
          },
          NOT_FOUND:{
            icon:'üîç',
            title:'Kh√¥ng t√¨m th·∫•y code',
            detail:`Code "${code}" kh√¥ng t·ªìn t·∫°i trong h·ªá th·ªëng.`,
            canRetry:false
          },
          NETWORK:{
            icon:'‚ö†Ô∏è',
            title:'L·ªói k·∫øt n·ªëi',
            detail:'Kh√¥ng th·ªÉ k·∫øt n·ªëi m√°y ch·ªß. Vui l√≤ng th·ª≠ l·∫°i.',
            canRetry:true
          }
        };
        
        const err=errors[type]||errors.NETWORK;
        
        // Auto retry
        if(err.canRetry&&retryCount<MAX_RETRIES){
          const delay=RETRY_DELAYS[retryCount]||5000;
          setTimeout(()=>{
            performSearch(code,retryCount+1);
          },delay);
          return;
        }
        
        // Show error state
        setButtonState('retry');
        showErrorState(err,code);
        isSearching=false;
        currentRetry=0;
      }
      
      function showSkeleton(){
        const res=document.getElementById('results');
        res.innerHTML=`
          <div class="skeleton skeleton-line" style="width:60%;height:30px;margin-bottom:20px"></div>
          <div class="skeleton skeleton-box"></div>
          <div class="skeleton skeleton-box"></div>
          <div class="skeleton skeleton-box"></div>
        `;
        res.style.display='block';
      }
      
      function showErrorState(err,code){
        const res=document.getElementById('results');
        res.innerHTML=`
          <div class="error-state">
            <div class="error-icon">${err.icon}</div>
            <div class="error-message">${err.title}</div>
            <div class="error-detail">${err.detail}</div>
            <div class="error-actions">
              <button class="btn btn-primary" onclick="search()">üîÑ Th·ª≠ L·∫°i</button>
              <button class="btn btn-secondary" onclick="location.reload()">üè† T·∫£i L·∫°i Trang</button>
            </div>
          </div>
        `;
        res.style.display='block';
        clearStatus();
      }
      
      function display(d){
        setButtonState('normal');
        clearStatus();
        const res=document.getElementById('results');
        
        if(d.error){
          showErrorState({
            icon:'‚ùå',
            title:'C√≥ l·ªói x·∫£y ra',
            detail:d.error,
            canRetry:false
          });
          return;
        }
        
        let html=`<h2 id="result-title">${d.title||'K·∫øt qu·∫£'}</h2>`;
        
        // Passwords
        if(d.passwords?.length){
          html+=`<div>
            <h3>M·∫≠t Kh·∫©u:</h3>
            <ul class="result-list">`;
          d.passwords.forEach(p=>{
            html+=`<li>${p}</li>`;
          });
          html+=`</ul></div>`;
        }
        
        // Notes
        if(d.notes?.length){
          html+=`<div>
            <h3>Ghi Ch√∫:</h3>
            <ul class="result-list">`;
          d.notes.forEach(n=>{
            html+=`<li>${n}</li>`;
          });
          html+=`</ul></div>`;
        }
        
        // Links
        html+=`<div><h3>Link Download</h3><ul class="result-list" id="link-list">`;
        if(d.links?.length){
          d.links.forEach((link,i)=>{
            html+=`<li><a href="javascript:void(0)" onclick="showPop('${link}')">${getLinkTxt(link)}</a></li>`;
          });
        }else{
          html+=`<li>Kh√¥ng c√≥ link download.</li>`;
        }
        html+=`</ul></div>`;
        
        res.innerHTML=html;
        res.style.display='block';
        
        showStatus(' T√¨m ki·∫øm th√†nh c√¥ng!','success');
        setTimeout(clearStatus,3000);
      }
      
      function getLinkTxt(url){
        const u=url.toLowerCase();
        const map={
          'drive.google.com':'Link Google Drive',
          'photos.app.goo.gl':'Link Google Photo',
          'fshare.vn':'Link Fshare',
          'mega.nz':'Link Mega',
          'mediafire.com':'Link MediaFire',
          'terabox.com':'Link Terabox',
          't.me':'Link Telegram',
          'telegram':'Link Telegram',
          'dropbox.com':'Link Dropbox',
          'usersdrive.com':'Link UsersDrive'
        };
        
        for(const[k,v]of Object.entries(map)){
          if(u.includes(k))return v;
        }
        return 'Link Download';
      }
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>
    <script>
      window.addEventListener('load',()=>{
        setTimeout(()=>{
          tsParticles.load("particle-canvas",{
            fpsLimit:60,
            particles:{
              number:{value:80,density:{enable:!0,value_area:800}},
              color:{value:"#A0A0E0"},
              shape:{type:"circle"},
              opacity:{value:.5,random:!0},
              size:{value:{min:1,max:3}},
              links:{enable:!0,distance:150,color:"#6A6ADF",opacity:.4,width:1},
              move:{enable:!0,speed:1,direction:"none",out_mode:"out"}
            },
            interactivity:{
              detect_on:"canvas",
              events:{onhover:{enable:!0,mode:"repulse"},resize:!0},
              modes:{repulse:{distance:250,duration:.3}}
            },
            detectRetina:!0
          });
        },500);
      });
    </script>
</body>
</html>




